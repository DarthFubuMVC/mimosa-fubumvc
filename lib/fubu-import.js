"use strict";
var Bliss, bliss, cleanAssets, copyContents, fs, importAssets, initFiles, logger, makeFolders, makeOptions, mkdirp, path, relativeToThisFile, setupFileSystem, watch, wrench, _;

fs = require('fs');

path = require('path');

watch = require('chokidar');

wrench = require('wrench');

logger = require('logmimosa');

_ = require('lodash');

mkdirp = require('mkdirp');

Bliss = require('bliss');

bliss = new Bliss({
  ext: ".bliss",
  cacheEnabled: false,
  context: {}
});

importAssets = function(mimosaConfig, options, next) {
  var extensions;
  extensions = mimosaConfig.extensions.copy;
  return next();
};

cleanAssets = function(mimosaConfig, options, next) {
  return next();
};

relativeToThisFile = function(filePath, dirname) {
  if (dirname == null) {
    dirname = __dirname;
  }
  return path.join(dirname, filePath);
};

setupFileSystem = function(args) {
  makeFolders();
  return initFiles(args);
};

makeFolders = function() {
  var folders;
  folders = ['assets/scripts', 'assets/styles', 'public'];
  return _.each(folders, function(dir) {
    logger.info("making sure " + dir + " exists");
    return mkdirp.sync(dir, function(err) {
      return logger.error(err);
    });
  });
};

makeOptions = function() {
  var options;
  return options = {
    name: path.basename(process.cwd())
  };
};

initFiles = function(flags) {
  var contents, ext, fileWithContents, files, options, pair, useCoffee, _i, _len, _results;
  if (flags == null) {
    flags = false;
  }
  useCoffee = flags === "coffee";
  options = makeOptions();
  ext = useCoffee ? "coffee" : "js";
  files = ["bower.json", "mimosa-config." + ext];
  contents = _(files).map(function(f) {
    return relativeToThisFile("../fubu-import-templates/" + f);
  }).map(function(f) {
    return bliss.render(f, options);
  }).map(function(f) {
    return f.trim();
  }).value();
  fileWithContents = _.zip(files, contents);
  _results = [];
  for (_i = 0, _len = fileWithContents.length; _i < _len; _i++) {
    pair = fileWithContents[_i];
    _results.push(copyContents(pair));
  }
  return _results;
};

copyContents = function(pair) {
  var contents, fileName;
  fileName = pair[0], contents = pair[1];
  if (!fs.existsSync(fileName)) {
    logger.info("creating " + fileName);
    return fs.writeFileSync(fileName, contents);
  }
};

module.exports = {
  importAssets: importAssets,
  cleanAssets: cleanAssets,
  setupFileSystem: setupFileSystem
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYzpcXGhvbWVcXGdpdGh1YlxcbWltb3NhLWZ1YnVtdmNcXGxpYlxcZnVidS1pbXBvcnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjOlxcaG9tZVxcZ2l0aHViXFxtaW1vc2EtZnVidW12Y1xcc3JjXFxmdWJ1LWltcG9ydC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBQSxDQUFBO0FBQUEsSUFBQSwyS0FBQTs7QUFBQSxFQUVBLEdBQUssT0FBQSxDQUFRLElBQVIsQ0FGTCxDQUFBOztBQUFBLElBR0EsR0FBTyxPQUFBLENBQVEsTUFBUixDQUhQLENBQUE7O0FBQUEsS0FJQSxHQUFRLE9BQUEsQ0FBUSxVQUFSLENBSlIsQ0FBQTs7QUFBQSxNQUtBLEdBQVMsT0FBQSxDQUFRLFFBQVIsQ0FMVCxDQUFBOztBQUFBLE1BTUEsR0FBUyxPQUFBLENBQVEsV0FBUixDQU5ULENBQUE7O0FBQUEsQ0FPQSxHQUFJLE9BQUEsQ0FBUSxRQUFSLENBUEosQ0FBQTs7QUFBQSxNQVFBLEdBQVMsT0FBQSxDQUFRLFFBQVIsQ0FSVCxDQUFBOztBQUFBLEtBU0EsR0FBUSxPQUFBLENBQVEsT0FBUixDQVRSLENBQUE7O0FBQUEsS0FVQSxHQUFZLElBQUEsS0FBQSxDQUNWO0FBQUEsRUFBQSxHQUFBLEVBQUssUUFBTDtBQUFBLEVBQ0EsWUFBQSxFQUFjLEtBRGQ7QUFBQSxFQUVBLE9BQUEsRUFBUyxFQUZUO0NBRFUsQ0FWWixDQUFBOztBQUFBLFlBZUEsR0FBZSxTQUFDLFlBQUQsRUFBZSxPQUFmLEVBQXdCLElBQXhCLEdBQUE7QUFDYixNQUFBLFVBQUE7QUFBQSxFQUFBLFVBQUEsR0FBYSxZQUFZLENBQUMsVUFBVSxDQUFDLElBQXJDLENBQUE7U0FLQSxJQUFBLENBQUEsRUFOYTtBQUFBLENBZmYsQ0FBQTs7QUFBQSxXQXVCQSxHQUFjLFNBQUMsWUFBRCxFQUFlLE9BQWYsRUFBd0IsSUFBeEIsR0FBQTtTQUNaLElBQUEsQ0FBQSxFQURZO0FBQUEs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QUEsV0FBZjtBQUFBLEVBQTRCLGlCQUFBLGVBQTVCO0NBakVqQixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCJcclxuXHJcbmZzID0gcmVxdWlyZSAnZnMnXHJcbnBhdGggPSByZXF1aXJlICdwYXRoJ1xyXG53YXRjaCA9IHJlcXVpcmUgJ2Nob2tpZGFyJ1xyXG53cmVuY2ggPSByZXF1aXJlICd3cmVuY2gnXHJcbmxvZ2dlciA9IHJlcXVpcmUgJ2xvZ21pbW9zYSdcclxuXyA9IHJlcXVpcmUgJ2xvZGFzaCdcclxubWtkaXJwID0gcmVxdWlyZSAnbWtkaXJwJ1xyXG5CbGlzcyA9IHJlcXVpcmUgJ2JsaXNzJ1xyXG5ibGlzcyA9IG5ldyBCbGlzc1xyXG4gIGV4dDogXCIuYmxpc3NcIlxyXG4gIGNhY2hlRW5hYmxlZDogZmFsc2UsXHJcbiAgY29udGV4dDoge31cclxuXHJcbmltcG9ydEFzc2V0cyA9IChtaW1vc2FDb25maWcsIG9wdGlvbnMsIG5leHQpIC0+XHJcbiAgZXh0ZW5zaW9ucyA9IG1pbW9zYUNvbmZpZy5leHRlbnNpb25zLmNvcHlcclxuICAjZ2F0aGVyIHNvdXJjZXNcclxuICAjLmxpbmtzXHJcbiAgI2Z1YnUtY29udGVudFxyXG4gICNzb3VyY2UgZGlyIChpbmNsdWRpbmcgY29udGVudClcclxuICBuZXh0KClcclxuXHJcbmNsZWFuQXNzZXRzID0gKG1pbW9zYUNvbmZpZywgb3B0aW9ucywgbmV4dCkgLT5cclxuICBuZXh0KClcclxuXHJcbnJlbGF0aXZlVG9UaGlzRmlsZSA9IChmaWxlUGF0aCwgZGlybmFtZSkgLT5cclxuICBkaXJuYW1lID89IF9fZGlybmFtZVxyXG4gIHBhdGguam9pbiBkaXJuYW1lLCBmaWxlUGF0aFxyXG5cclxuc2V0dXBGaWxlU3lzdGVtID0gKGFyZ3MpIC0+XHJcbiAgbWFrZUZvbGRlcnMoKVxyXG4gIGluaXRGaWxlcyhhcmdzKVxyXG5cclxubWFrZUZvbGRlcnMgPSAtPlxyXG4gIGZvbGRlcnMgPSBbJ2Fzc2V0cy9zY3JpcHRzJywgJ2Fzc2V0cy9zdHlsZXMnLCAncHVibGljJ11cclxuICBfLmVhY2ggZm9sZGVycywgKGRpcikgLT5cclxuICAgIGxvZ2dlci5pbmZvIFwibWFraW5nIHN1cmUgI3tkaXJ9IGV4aXN0c1wiXHJcbiAgICBta2RpcnAuc3luYyBkaXIsIChlcnIpIC0+XHJcbiAgICAgIGxvZ2dlci5lcnJvcihlcnIpXHJcblxyXG5tYWtlT3B0aW9ucyA9IC0+XHJcbiAgb3B0aW9ucyA9XHJcbiAgICBuYW1lOiBwYXRoLmJhc2VuYW1lIHByb2Nlc3MuY3dkKClcclxuXHJcbmluaXRGaWxlcyA9IChmbGFncyA9IGZhbHNlKSAtPlxyXG4gIHVzZUNvZmZlZSA9IGZsYWdzID09IFwiY29mZmVlXCJcclxuICBvcHRpb25zID0gbWFrZU9wdGlvbnMoKVxyXG4gIGV4dCA9IGlmIHVzZUNvZmZlZSB0aGVuIFwiY29mZmVlXCIgZWxzZSBcImpzXCJcclxuICBmaWxlcyA9IFtcImJvd2VyLmpzb25cIiwgXCJtaW1vc2EtY29uZmlnLiN7ZXh0fVwiXVxyXG4gIGNvbnRlbnRzID0gXyBmaWxlc1xyXG4gICAgLm1hcCAoZikgLT4gcmVsYXRpdmVUb1RoaXNGaWxlIFwiLi4vZnVidS1pbXBvcnQtdGVtcGxhdGVzLyN7Zn1cIlxyXG4gICAgLm1hcCAoZikgLT4gYmxpc3MucmVuZGVyIGYsIG9wdGlvbnNcclxuICAgIC5tYXAgKGYpIC0+IGYudHJpbSgpXHJcbiAgICAudmFsdWUoKVxyXG4gIGZpbGVXaXRoQ29udGVudHMgPSBfLnppcChmaWxlcywgY29udGVudHMpXHJcblxyXG4gIGNvcHlDb250ZW50cyBwYWlyIGZvciBwYWlyIGluIGZpbGVXaXRoQ29udGVudHNcclxuXHJcbmNvcHlDb250ZW50cyA9IChwYWlyKSAtPlxyXG4gIFtmaWxlTmFtZSwgY29udGVudHNdID0gcGFpclxyXG4gIHVubGVzcyBmcy5leGlzdHNTeW5jIGZpbGVOYW1lXHJcbiAgICBsb2dnZXIuaW5mbyBcImNyZWF0aW5nICN7ZmlsZU5hbWV9XCJcclxuICAgIGZzLndyaXRlRmlsZVN5bmMgZmlsZU5hbWUsIGNvbnRlbnRzXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtpbXBvcnRBc3NldHMsIGNsZWFuQXNzZXRzLCBzZXR1cEZpbGVTeXN0ZW19XHJcbiJdfQ==
