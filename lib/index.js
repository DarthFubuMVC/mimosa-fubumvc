"use strict";
var config, fubuImport, registerCommand, registration, scaffolding;

config = require('./config');

fubuImport = require('./fubu-import');

scaffolding = require('./scaffolding');

registration = function(mimosaConfig, register) {
  mimosaConfig.log["info"]("setting up fubumvc");
  scaffolding.setupFileSystemWithConfig(mimosaConfig);
  register(['preBuild'], 'init', function(mimosaConfig, options, next) {
    return fubuImport.importAssets(mimosaConfig, options, next);
  });
  return register(['postClean'], 'init', fubuImport.cleanAssets);
};

registerCommand = function(program, retrieveConfig) {
  program.command('fubu:init').description("bower.json and mimosa-config, 'coffee' flag for coffee").action(function(args) {
    return scaffolding.setupFileSystem(args, retrieveConfig);
  });
  return program.command('fubu:reset').description("rm -rf on assets and public then runs fubu:init").action(function(args) {
    return scaffolding.resetFileSystem(args, retrieveConfig);
  });
};

module.exports = {
  registration: registration,
  registerCommand: registerCommand,
  defaults: config.defaults,
  placeholder: config.placeholder,
  validate: config.validate
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL21udC9SZXNvdXJjZXMvUHJvamVjdHMvbWltb3NhLWZ1YnVtdmMvbGliL2luZGV4LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL21udC9SZXNvdXJjZXMvUHJvamVjdHMvbWltb3NhLWZ1YnVtdmMvc3JjL2luZGV4LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFBLENBQUE7QUFBQSxJQUFBLDhEQUFBOztBQUFBLE1BRUEsR0FBUyxPQUFBLENBQVEsVUFBUixDQUZULENBQUE7O0FBQUEsVUFHQSxHQUFhLE9BQUEsQ0FBUSxlQUFSLENBSGIsQ0FBQTs7QUFBQSxXQUlBLEdBQWMsT0FBQSxDQUFRLGVBQVIsQ0FKZCxDQUFBOztBQUFBLFlBTUEsR0FBZSxTQUFDLFlBQUQsRUFBZSxRQUFmLEdBQUE7QUFDYixFQUFBLFlBQVksQ0FBQyxHQUFJLENBQUEsTUFBQSxDQUFqQixDQUF5QixvQkFBekIsQ0FBQSxDQUFBO0FBQUEsRUFDQSxXQUFXLENBQUMseUJBQVosQ0FBc0MsWUFBdEMsQ0FEQSxDQUFBO0FBQUEsRUFFQSxRQUFBLENBQVMsQ0FBQyxVQUFELENBQVQsRUFBdUIsTUFBdkIsRUFBK0IsU0FBQyxZQUFELEVBQWUsT0FBZixFQUF3QixJQUF4QixHQUFBO1dBQzdCLFVBQVUsQ0FBQyxZQUFYLENBQXdCLFlBQXhCLEVBQXNDLE9BQXRDLEVBQStDLElBQS9DLEVBRDZCO0VBQUEsQ0FBL0IsQ0FGQSxDQUFBO1NBSUEsUUFBQSxDQUFTLENBQUMsV0FBRCxDQUFULEVBQXdCLE1BQXhCLEVBQWdDLFVBQVUsQ0FBQyxXQUEzQyxFQUxhO0FBQUEsQ0FOZixDQUFBOztBQUFBLGVBYUEsR0FBa0IsU0FBQyxPQUFELEVBQVUsY0FBVixHQUFBO0FBQ2hCLEVBQUEsT0FDRSxDQUFDLE9BREgsQ0FDVyxXQURYLENBRUUsQ0FBQyxXQUZILENBRWUsd0RBRmYsQ0FHRSxDQUFDLE1BSEgsQ0FHVSxTQUFDLElBQUQsR0FBQTtXQUNOLFdBQVcsQ0FBQyxlQUFaLENBQTRCLElBQTVCLEVBQWtDLGNBQWxDLEVBRE07RUFBQSxDQUhWLENBQUEsQ0FBQTtTQUtBLE9BQ0UsQ0FBQyxPQURILENBQ1csWUFEWCxDQUVFLENBQUMsV0FGSCxDQUVlLGlEQUZmLENBR0UsQ0FBQyxNQUhILENBR1UsU0FBQyxJQUFELEdBQUE7V0FDTixXQUFXLENBQUMsZUFBWixDQUE0QixJQUE1QixFQUFrQyxjQUFsQyxFQURNO0VBQUEsQ0FIVixFQU5nQjtBQUFBLENBYmxCLENBQUE7O0FBQUEsTUF5Qk0sQ0FBQyxPQUFQLEdBQ0U7QUFBQSxFQUFBLFlBQUEsRUFBaUIsWUFBakI7QUFBQSxFQUNBLGVBQUEsRUFBaUIsZUFEakI7QUFBQSxFQUVBLFFBQUEsRUFBaUIsTUFBTSxDQUFDLFFBRnhCO0FBQUEsRUFHQSxXQUFBLEVBQWlCLE1BQU0sQ0FBQyxXQUh4QjtBQUFBLEVBSUEsUUFBQSxFQUFpQixNQUFNLENBQUMsUUFKeEI7Q0ExQkYsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiXG5cbmNvbmZpZyA9IHJlcXVpcmUgJy4vY29uZmlnJ1xuZnVidUltcG9ydCA9IHJlcXVpcmUgJy4vZnVidS1pbXBvcnQnXG5zY2FmZm9sZGluZyA9IHJlcXVpcmUgJy4vc2NhZmZvbGRpbmcnXG5cbnJlZ2lzdHJhdGlvbiA9IChtaW1vc2FDb25maWcsIHJlZ2lzdGVyKSAtPlxuICBtaW1vc2FDb25maWcubG9nW1wiaW5mb1wiXSBcInNldHRpbmcgdXAgZnVidW12Y1wiXG4gIHNjYWZmb2xkaW5nLnNldHVwRmlsZVN5c3RlbVdpdGhDb25maWcgbWltb3NhQ29uZmlnXG4gIHJlZ2lzdGVyIFsncHJlQnVpbGQnXSwgJ2luaXQnLCAobWltb3NhQ29uZmlnLCBvcHRpb25zLCBuZXh0KSAtPlxuICAgIGZ1YnVJbXBvcnQuaW1wb3J0QXNzZXRzIG1pbW9zYUNvbmZpZywgb3B0aW9ucywgbmV4dFxuICByZWdpc3RlciBbJ3Bvc3RDbGVhbiddLCAnaW5pdCcsIGZ1YnVJbXBvcnQuY2xlYW5Bc3NldHNcblxucmVnaXN0ZXJDb21tYW5kID0gKHByb2dyYW0sIHJldHJpZXZlQ29uZmlnKSAtPlxuICBwcm9ncmFtXG4gICAgLmNvbW1hbmQoJ2Z1YnU6aW5pdCcpXG4gICAgLmRlc2NyaXB0aW9uKFwiYm93ZXIuanNvbiBhbmQgbWltb3NhLWNvbmZpZywgJ2NvZmZlZScgZmxhZyBmb3IgY29mZmVlXCIpXG4gICAgLmFjdGlvbiAoYXJncykgLT5cbiAgICAgIHNjYWZmb2xkaW5nLnNldHVwRmlsZVN5c3RlbSBhcmdzLCByZXRyaWV2ZUNvbmZpZ1xuICBwcm9ncmFtXG4gICAgLmNvbW1hbmQoJ2Z1YnU6cmVzZXQnKVxuICAgIC5kZXNjcmlwdGlvbihcInJtIC1yZiBvbiBhc3NldHMgYW5kIHB1YmxpYyB0aGVuIHJ1bnMgZnVidTppbml0XCIpXG4gICAgLmFjdGlvbiAoYXJncykgLT5cbiAgICAgIHNjYWZmb2xkaW5nLnJlc2V0RmlsZVN5c3RlbSBhcmdzLCByZXRyaWV2ZUNvbmZpZ1xuXG5tb2R1bGUuZXhwb3J0cyA9XG4gIHJlZ2lzdHJhdGlvbjogICAgcmVnaXN0cmF0aW9uXG4gIHJlZ2lzdGVyQ29tbWFuZDogcmVnaXN0ZXJDb21tYW5kXG4gIGRlZmF1bHRzOiAgICAgICAgY29uZmlnLmRlZmF1bHRzXG4gIHBsYWNlaG9sZGVyOiAgICAgY29uZmlnLnBsYWNlaG9sZGVyXG4gIHZhbGlkYXRlOiAgICAgICAgY29uZmlnLnZhbGlkYXRlXG4iXX0=
